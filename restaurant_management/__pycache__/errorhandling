from rest_framework.decorators import api_view
from rest_framework.response import Response
from rest_framework import status
from .models import MenuItem
from .serializers import MenuItemSerializer
from django.db import DatabaseError

@api_view(['GET'])
def get_menu_item(request, pk):
    try:
        menu_item = MenuItem.objects.get(pk=pk)
        serializer = MenuItemSerializer(menu_item)
        return Response(serializer.data, status=status.HTTP_200_OK)
    
    except MenuItem.DoesNotExist:
        return Response(
            {'error': 'Menu item not found'},
            status=status.HTTP_404_NOT_FOUND
        )
    
    except DatabaseError:
        return Response(
            {'error': 'A database error occurred. Please try again later.'},
            status=status.HTTP_500_INTERNAL_SERVER_ERROR
        )
    
    except Exception as e:
        return Response(
            {'error': f'An unexpected error occurred: {str(e)}'},
            status=status.HTTP_500_INTERNAL_SERVER_ERROR
        )